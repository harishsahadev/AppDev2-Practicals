<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjs@10.5.3/lib/browser/math.min.js"></script>

    <script type="text/javascript">
        function addLog(msg){
            var ul = document.getElementById("log");
            var li = document.createElement("li");
            var msg_text_node = document.createTextNode(msg);
            li.appendChild(msg_text_node);
            ul.appendChild(li);
        }

        function calculate(){
            expression = document.getElementById("expression").value;
            console.log(expression);
            if(expression){
                try{
                    answer = eval(expression);
                    document.getElementById("expression").value = answer;
                    addLog(expression+" = "+answer);
                } catch(e){
                    console.log("Bad Expression")
                    addLog(expression + " is bad. Please fix it")
                }
            }
        }

        function math_calculate(){
            expression = document.getElementById("expression").value;
            console.log(expression);
            if(expression){
                try{
                    answer = math.evaluate(expression);
                    document.getElementById("expression").value = answer;
                    addLog(expression+" = "+answer);
                } catch(e){
                    console.log("Bad Expression")
                    addLog(expression + " is bad. Please fix it")
                }
            }    
        }

        function initialize_app(){
            calculate_button = document.getElementById("calculate")
            calculate_button.addEventListener("click", math_calculate)
        }

        function input_button(v){
            expression = document.getElementById("expression").value;
            expression = expression + v;
            document.getElementById("expression").value = expression;
        }

    </script>

</head>
<body onload="initialize_app()">
    <div class="container">
        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <input type="input" id="expression" placeholder="eg: 3*6"/>
            </div> 
            <div class="col">
            </div>
        </div>

        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <button class="btn btn-primary" onclick="input_button('7')">7</button>
                <button class="btn btn-primary" onclick="input_button('8')">8</button>
                <button class="btn btn-primary" onclick="input_button('9')">9</button>
                <button class="btn btn-warning" onclick="input_button('/')">/</button>
            </div> 
            <div class="col">
            </div>
        </div>

        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <button class="btn btn-primary" onclick="input_button('4')">4</button>
                <button class="btn btn-primary" onclick="input_button('5')">5</button>
                <button class="btn btn-primary" onclick="input_button('6')">6</button>
                <button class="btn btn-warning" onclick="input_button('*')">*</button>
            </div> 
            <div class="col">
            </div>
        </div>

        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <button class="btn btn-primary" onclick="input_button('1')">1</button>
                <button class="btn btn-primary" onclick="input_button('2')">2</button>
                <button class="btn btn-primary" onclick="input_button('3')">3</button>
                <button class="btn btn-warning" onclick="input_button('-')">-</button>
            </div> 
            <div class="col">
            </div>
        </div>

        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <button class="btn btn-primary" onclick="input_button('0')">0</button>
                <button class="btn btn-primary" onclick="input_button('.')">.</button>
                <button id="calculate" class="btn btn-success">=</button>
                <button class="btn btn-warning" onclick="input_button('+')">+</button>
            </div> 
            <div class="col">
            </div>
        </div>

        <div class="row">
            <div class="col">
            </div>
            <div class="col">
                <h3>Log</h3>
                <ul id="log"></ul>
            </div> 
            <div class="col">
            </div>
        </div>
    </div>
</body>
<!---
<script type="text/javascript">
    initialize_app()
</script>
-->
</html>